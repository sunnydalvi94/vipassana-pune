;(function(factory){if(typeof define==='function'&&define.amd){define(['jquery'],factory);}else if(typeof exports!=='undefined'){module.exports=factory(require('jquery'));}else{factory(jQuery);}})(function($){var MySlider=(function(element,settings){var instanceUid=0;function _MySlider(element,settings){this.defaults={slideDuration:'3000',speed:500,arrowRight:'.arrow-right',arrowLeft:'.arrow-left',name:'.slide',showIndicators:'true',pauseOnhover:'true'};this.settings=$.extend({},this,this.defaults,settings);this.initials={currSlide:0,$currSlide:null,totalSlides:false,csstransitions:false,pause:false};$.extend(this,this.initials);this.$el=$(element);this.changeSlide=$.proxy(this.changeSlide,this);this.mouseOver=$.proxy(this.mouseOver,this);this.init();this.instanceUid=instanceUid++;}return _MySlider;})();MySlider.prototype.init=function(){this.csstransitionsTest();this.$el.addClass('MySlider-carousel');this.build();this.events();this.activate();this.initTimer();};MySlider.prototype.csstransitionsTest=function(){var elem=document.createElement('modernizr');var props=["transition","WebkitTransition","MozTransition","OTransition","msTransition"];for(var i in props){var prop=props[i];var result=elem.style[prop]!==undefined?prop:false;if(result){this.csstransitions=result;break;}}};MySlider.prototype.addCSSDuration=function(){var _=this;this.$el.find('.slide').each(function(){this.style[_.csstransitions+'Duration']=_.settings.speed+'ms';});}
MySlider.prototype.removeCSSDuration=function(){var _=this;this.$el.find('.slide').each(function(){this.style[_.csstransitions+'Duration']='';});}
MySlider.prototype.build=function(){this.totalSlides=this.$el.find('.slide').length;if(this.settings.showIndicators=='true'){var $indicators=this.$el.append('<ul class="indicators" >').find('.indicators');for(var i=0;i<this.totalSlides;i++)$indicators.append('<li data-index='+i+'>');}};MySlider.prototype.activate=function(){this.$currSlide=this.$el.find('.slide').eq(0);if(this.settings.showIndicator=='true'){this.$el.find('.indicators li').eq(0).addClass('active');}};MySlider.prototype.events=function(){$('body').on('click',this.settings.arrowRight,{direction:'right'},this.changeSlide).on('click',this.settings.arrowLeft,{direction:'left'},this.changeSlide);if(this.settings.showIndicators=='true')$('body').on('click','.indicators li',this.changeSlide);$('body').on('mouseenter',this.settings.name,{pause:true},this.mouseOver);$('body').on('mouseleave',this.settings.name,{pause:false},this.mouseOver);};MySlider.prototype.mouseOver=function(e){this.pause=e.data.pause;if(this.pause==true){if(this.settings.pauseOnhover=='true'){clearInterval(this.timer);this.timer=null}}else{if(!this.timer)this.timer=setInterval(this.changeSlide,this.settings.slideDuration);}};MySlider.prototype.clearTimer=function(){if(this.timer)clearInterval(this.timer);};MySlider.prototype.initTimer=function(){this.timer=setInterval(this.changeSlide,this.settings.slideDuration);};MySlider.prototype.startTimer=function(){this.initTimer();this.throttle=false;};MySlider.prototype.changeSlide=function(e){if(this.throttle)return;this.throttle=true;this.clearTimer();var direction=this._direction(e);var animate=this._next(e,direction);if(!animate)return;var $nextSlide=this.$el.find('.slide').eq(this.currSlide).addClass(direction+' active');this._jsAnimation($nextSlide,direction);};MySlider.prototype._direction=function(e){var direction;if(typeof e!=='undefined'){direction=(typeof e.data==='undefined'?'right':e.data.direction);}else{direction='right';}return direction;};MySlider.prototype._next=function(e,direction){var index=(typeof e!=='undefined'?$(e.currentTarget).data('index'):undefined);switch(true){case(typeof index!=='undefined'):if(this.currSlide==index){this.startTimer();return false;}this.currSlide=index;break;case(direction=='right'&&this.currSlide<(this.totalSlides-1)):this.currSlide++;break;case(direction=='right'):this.currSlide=0;break;case(direction=='left'&&this.currSlide===0):this.currSlide=(this.totalSlides-1);break;case(direction=='left'):this.currSlide--;break;}return true;};MySlider.prototype._cssAnimation=function($nextSlide,direction){setTimeout(function(){this.$el.addClass('transition');this.addCSSDuration();this.$currSlide.addClass('shift-'+direction);}.bind(this),100);setTimeout(function(){this.$el.removeClass('transition');this.removeCSSDuration();this.$currSlide.removeClass('active shift-left shift-right');this.$currSlide=$nextSlide.removeClass(direction);this._updateIndicators();this.startTimer();}.bind(this),100+this.settings.speed);};MySlider.prototype._jsAnimation=function($nextSlide,direction){var _=this;if(direction=='right')_.$currSlide.addClass('js-reset-left');var animation={};animation[direction]='0%';var animationPrev={};animationPrev[direction]='100%';this.$currSlide.animate(animationPrev,this.settings.speed);$nextSlide.animate(animation,this.settings.speed,'swing',function(){_.$currSlide.removeClass('active js-reset-left').attr('style','');_.$currSlide=$nextSlide.removeClass(direction).attr('style','');_._updateIndicators();_.startTimer();});};MySlider.prototype._updateIndicators=function(){if(this.settings.showIndicators=='true')this.$el.find('.indicators li').removeClass('active').eq(this.currSlide).addClass('active');};$.fn.MySlider=function(options){return this.each(function(index,el){el.MySlider=new MySlider(el,options);});};});